### 6.15일 토요일

#### 휴가 / 연차 시스템 초기 설정 구축

- 명령어 입력을 받기 위한 리스트를 먼저 구성
- 명령어 입력을 하고 특정 토큰 부분을 확인해서 리스트에 있는지 확인
- 리스트의 가장 첫번째 저장된 문자열을 반환
- 해당 문자열에 맞게 상태 변경
- 상태를 확인하고 그에 맞는 함수 호출

### 6.18일 화요일

#### 문서 4종 생성 관련

- 문서 생성시 기업명 정보를 google spreadsheet로부터 load 해야 함
  - 이와 관련된 발생 가능한 예외 처리 진행
  - 예외 발생시 에러 메세지 출력하고 즉시 종료 (user_states[] 해당 정보 del 하는 방향으로 구현)

#### 휴가 / 연차 시스템 프로세스 - 신청 시스템 

- [x] 휴가 / 연차 신청(추가) 함수 구현 완료
- [x] user_vacation_info, user_vacation_status로 user_id의 인덱싱을 활용해 정보 및 상태 관리
  - [x] slack bot 개발의 경우 이벤트 함수 콜이 독립적으로 진행되기 때문에, 해당 함수를 계속 call 해줘야 순차적인 데이터 입력이 가능 (다른 input을 연속으로 기다릴 수 없음)
  - [x] 따라서 status를 활용해서 각 상태 별 진행되는 행위(입력을 받거나 혹은 검증을 진행하거나)에 맞는 함수를 call 해야 한다
  - [x] 각각 입력한 정보가 검증이 된 이후에는 user_vacation_info에 value로 append 된다
    - [x] 처음에는 빈 리스트로 구성하고 이후에 .append()로 정보를 담는다
    - [x] 초기화하는 경우, 대표적인 상황으로 '종료'를 누르게 되면 해당 정보를 user_states, user_vacation_info, user_vacation_status에서 관련된 모든 것들을 삭제
- [x] 예외 처리 완료(ex.날짜 형식 미준수, 날짜 선후 미준수, 숫자 형식 미준수... 등등 처리 완료)

- [x] : 남은 휴가 일수와 비교했을 때 신청 가능 여부 살펴보기 in vacation_request
  - [x] : 남은 휴가 일수를 조회하는 함수 구현을 진행해야 한다
    - [x] : 3번째 시트 연결 - 첫번째 이름 비교 - 같은 이름의 해당 데이터의 [연차 휴가 잔여일수 , 안식 휴가 잔여일수] 반환하는 형태로 구성하기
    - **유의** 종료를 입력할 일이 없는 일회성 기능, 따라서 종료를 입력한 경우를 고려하지 않음. 기능 실행 이후 바로 종료
  - [x] : 개인 휴가인 경우와 안식 휴가인 경우를 각각 구분해야 한다
    - [x] : get_remained_vacation_by_userId(spreadsheet_id, user_id) - [개인 휴가 잔여, 안식 휴가 잔여] 반환
    - [x] : 개인 휴가인 경우에는 연차 휴가의 잔여일수를 가지고 와서 비교해야 한다
    - [x] : 안식 휴가인 경우 안식 휴가의 잔여일수를 가지고 와서 비교해야 한다
      - [x] : 개인이 신청하는 휴가 <= 잔여 휴가 - 휴가 신청 허용
      - [x] : 개인이 신청하는 휴가 > 잔여 휴가 - 휴가 반려

- [ ] : **추가 예외 처리** 신청시 형식 문제인지 혹은 선후 관계 문제인지 알려주기
- [ ] : **추가 예외 처리** 동일한 날 휴가 신청 시 중복 불가하게 하기
- [ ] : **추가 예외 처리** 중간에 응답 속도가 살짝 느린 경향이 있는데 이를 어떻게 해결할 지 생각해보기

#### 휴가 / 연차 시스템 프로세스 - 취소 시스템 
- [x] 기존에 신청한 휴가 리스트업 완료
  - [x] 각각의 휴가에 번호를 붙여 출력하기
- [x] 번호를 입력받기
  - [x] 입력받은 번호가 수인지 확인
  - [x] 입력받은 번호가 1-전체 신청한 휴가 수의 범위를 만족하는지 확인
- [x] 스프레트 시트 관련된 API 수정 및 추가하기 
  - [x] 스프레드시트 관련 함수 인자에 sheet_number 반영
  - [x] 함수(sheet_id, sheet_number, new_row_data) 형식으로 변경 + sheet_number까지 변경 가능 in googleVacaptionApi
  - [x] 번호에 해당하는 레코드 스프레드 시트 상에서 제거
  - [ ] 이메일 관련 대문자 케이스도 고려해보기 - 정상 입력은 되는데 split() 관련해서 에러 발생함
- [x] 휴가 삭제 진행한 이후 조회, 추가, 삭제 기능 구현
  - [x] 조회 기능 구현
    - [x] 리스트로 출력 (형식 1. ....)
    - [ ] 빈 리스트의 경우 따로 say() 만들기
  - [x] 추가 기능 구현
    - [x] user_states 수정
  - [x] 삭제 기능 구현
    - [x] user_states 수정
- [ ] 안전하게 종료되는지 확인하는 과정 만들기 

#### 휴가 / 연차 시스템 프로세스 - 추가 구현 내용
- [x] 남은 휴가 일 수 보여주기
  - [x] ["남은 휴가 알려줘", "남은 휴가"]
  - [개인휴가 잔여일수, 안식휴가 잔여일수] 반환
- [x] 금일 휴가자 정보 보여주기 - "오늘 휴가자 알려줘", "금일 휴가자 알려줘"
  - [x] 추가 입력 없는 일회성 - user_states 반영할 필요가 없음
  - [x] 휴가신청 내역 가지고 오는 함수 만들기
    - [x] 시작 날짜 금일인 데이터만 가지고 오기
- [x] 매일 오전 8시 당일 휴가자 정보를 알려줘야 한다
  - [x] 별도 스레드 실행으로 2개의 프로그램이 동시에 진행되는 상황
  - [x] 8시 휴가자 알림 프로그램 그리고 슬랙봇 프로그램이 진행된다 

#### 추후 리팩토링할 사항들
- [ ] slack_bot.py 너무 크다 - 서비스 혹은 기능별로 별도로 구성해서 import 하는 방안 생각하기


#### 스프레드시트 관련 수정 사항

총 3개의 시트로 구성되어 있으며 휴가신청내역, 계산용, 통계 시트가 존재함
- 계산용은 이미 수식이 구성되어 있어 드래그 형태로 진행하면 문제가 없음
- 통계시트에도 휴가 종류에는 수식이 반영되어 있어 아무런 문제가 없음
- 연차 휴가 그리고 안식 휴가 상에서 사용일수가 수식이 반영이 되어 있지 않은게 문제
  - 연차 휴가, 예시를 보니 개인휴가만 반영되어 있어 개인휴가 칸의 값을 그대로 반영하는 걸로 스프레드시트 함수(SUM) 반영
  - 안식 휴가, 예시를 보니 안식휴가만 반영되어 있어 안식휴가 칸의 값을 그대로 반영하는 걸로 스프레드시트 함수(SUM) 반영